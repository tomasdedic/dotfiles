{
"Automated Analysis": {
"prefix": "adoAutomatedAnalysis0",
"body": [
"- task: AutomatedAnalysis@0",
"  inputs:",
"    connectedServiceNameARM: $1  # Required  # Select an Azure Resource Manager subscription",
"    ResourceGroupName: $2  # Required  # Provide the name of a resource group",
"    containerGroupName: $3  # Required  # Name of the container group to run the analysis module. Specified container group will be created if it does not exist.",
"    location: $4  # Required  # Location of the container group. Container group will be created in specified location if it does not exist.",
"    logLevel: ${5:Info} # Options: 'Info', 'Debug', 'Warning', 'Error', 'Critical' # Required  # Verbosity of the analysis logs.",
"    provider: ${6:Prometheus} # Options: 'Prometheus', 'Datadog' # Required  # Metric provider to query metrics",
"    endpointUrl: $7  # Required  # Provide endpoint url to query the metrics",
"    apiKey: $8  # Required when provider == Datadog ",
"    appKey: $9  # Required when provider == Datadog ",
"    headers: $10  # Required  # Additional headers in the format headername:headervalue etc. Multiple headers are separated by newlines",
"    expressionTemplates: $11  # Required  # Multiline input where each line contains an expression used to query for metrics on the service of concern. $label and $value can be injected into the templates to identify the pivot label. Eg: sum(rate(requests_total{custom_status=\"good\", $label=~\"$value\" }[1m])) ",
"    templateSubstitutions: $12  # Required  # Multiline input where each line contains 3 tokens – <labelName> <baselineValue> <canaryValue> corresponding to the line of same index in the expressionTemplates input.",
"    #areMetricsCritical:  # Optional  # Multiline input where each line contains one of the two values – True/False. If true, a non-Pass classification for the metric will result in failure of the entire task. If false, a non-Pass classification would affect the score, but will not result in failure of the task. If input is left unspecified, default is assumed to be false for all metrics",
"    #mustHaveData:  # Optional  # Multiline input where each line contains one of the two values – True/False. If true, a noData classification for the metric will result in failure of the entire task. If false, a noData classification would affect the score, but will not result in failure of the task. If input is left unspecified, default is assumed to be false for all metrics",
"    analysisType: ${13:realtime} # Options: 'realtime', 'range' # Required  # If realtime, analysis is performed over a time duration beginning at the moment of execution. If range, analysis is performed over an explicitly specified time interval in the past",
"    windowType: ${14:sliding} # Options: 'sliding', 'growing' # Required  # If growing, metrics during the entire lifetime is considered for evaluation. If sliding, metrics during the most recent interval used for evaluation.",
"    #delay:  # Optional  # Time (provide unit of time (s, m, h)) to wait before commencing collection and analysis of metrics",
"    #lifetime:  # Optional  # Time (provide unit of time (s, m, h))) spanning the entire duration of the canary analysis",
"    #analysisBeginTime:  # Optional  # Start time to collect the metrics. Provide timestamp in yyyy-mm-ddThh:mm:ssZ format (UTC time)",
"    #analysisEndTime:  # Optional  # Time to stop the metric collection. Provide timestamp in yyyy-mm-ddThh:mm:ssZ format (UTC time)",
"    #interval:  # Optional  # Single canary analysis task’s lifetime is composed of multiple loops of metrics collection and evaluation – each happening over a time window as specified under the interval input (provide unit of time (s, m, h)).",
"    #step:  # Optional ",
"    preprocessor: ${15:ksigma} # Options: 'ksigma', 'iqr' # Required ",
"    #nanStrategy:  # Optional  # Multiline input where each line contains one of the two values – remove/replaceWithZeroes. This input specifies how NaN values are to be handled for each metric. Default: Remove",
"    classifier: ${16:mannWhitney} # Options: 'mannWhitney' # Required ",
"    #metricGroups:  # Optional  # Multiline input where each line contains a number corresponding to the line of same index in the expressionTemplates input. Group numbering starts from 1,2,3… If this input is left unspecified, all metrics are clubbed in a single group (Group 1)",
"    #groupWeights:  # Optional  # Multiline input where each line denotes a weight to be used for each unique group specified(1,2,3..) while computing the final score. 0 < groupWeighti <= 1. Sum of all groupWeights should be equal to 1. If this input is left unspecified, all groups are given equal weights",
"    #direction:  # Optional  # Multiline input where each line contains one of the three values – increase/decrease/either. The metric is failed (non-Pass classification of High or Low) if there is a statistical difference found between the canary and baseline metrics in the direction specified by the user",
"    #confidenceLevel:  # Optional  # If unspecified, default value is 0.95",
"    #allowedIncrease:  # Optional ",
"    #allowedDecrease:  # Optional ",
"    #criticalIncrease:  # Optional ",
"    #criticalDecrease:  # Optional ",
"    #marginalThreshold:  # Optional  # If the windowScore is below the marginalThreshold specified by the user, the task is failed right away (remaining windows in the lifetime of task need not be evaluated). Else, the procedure of metrics collection, validation, cleaning, classification and scoring are repeated for the next window. Default: 0.5",
"    #passThreshold:  # Optional  # Once the final window has been analysed and scored, the score is compared with the passThreshold specified by the user. If the score is greater than passThreshold, the task is marked successful. Else, the task is marked as failure. Default: 0.95",
"$17"
],
"description": "Do a automated analysis of your appication metrics "
}
}
